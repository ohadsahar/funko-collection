<div class="dialog-register-component">
  <h2 mat-dialog-title>הרשמה</h2>
  <mat-dialog-content class="mat-typography">
    <mat-horizontal-stepper linear #stepper>
      <mat-step [stepControl]="firstFormGroup" errorMessage="מידע אישי חייב למלא">
        <form [formGroup]="firstFormGroup">
          <ng-template matStepLabel>מידע אישי</ng-template>
          <mat-form-field class="full-width">
            <input matInput type="email" formControlName="email" autocomplete="email" required>
            <mat-placeholder class="placeholder">הכנס את האיימיל שלך</mat-placeholder>
            <mat-hint>לדוגמא: funko@gmail.com</mat-hint>
            <mat-error>חובה להכניס מייל</mat-error>
          </mat-form-field>
          <mat-form-field class="full-width">
            <input matInput type="text" formControlName="firstname" autocomplete="firstname" required>
            <mat-placeholder class="placeholder">שם פרטי</mat-placeholder>
            <mat-hint>לדוגמא: תום</mat-hint>
            <mat-error>חובה להכניס שם פרטי</mat-error>
          </mat-form-field>
          <mat-form-field class="full-width">
            <input matInput type="text" formControlName="lastname" autocomplete="lastname" required>
            <mat-placeholder class="placeholder">שם משפחה</mat-placeholder>
            <mat-hint>לדוגמא: הולנד</mat-hint>
            <mat-error>חובה להכניס שם משפחה</mat-error>
          </mat-form-field>
          <mat-divider></mat-divider>
          <div>
            <button mat-button matStepperNext>הבא</button>
          </div>
        </form>
      </mat-step>
      <mat-step [stepControl]="secondFormGroup" errorMessage="חובה למלא פרטי בטיחות">
        <form [formGroup]="secondFormGroup">
          <ng-template matStepLabel>פרטי בטיחות</ng-template>
          <mat-form-field class="full-width">
            <input matInput type="password" formControlName="password" autocomplete="password" required>
            <mat-placeholder class="placeholder">הכנס את סיסמתך</mat-placeholder>
            <mat-hint>סיסמא צריכה להכיל 8 תווים</mat-hint>
            <mat-error>חובה להכניס סיסמא</mat-error>
          </mat-form-field>
          <mat-form-field class="full-width">
            <input matInput type="number" formControlName="age" autocomplete="age" min="6" max="120" required>
            <mat-placeholder class="placeholder">הכנס את גילך</mat-placeholder>
            <mat-hint>טווח הגילאים הוא 6 - 120</mat-hint>
            <mat-error>חובה להכניס גיל</mat-error>
          </mat-form-field>
          <div>
            <button mat-button matStepperPrevious>אחורה</button>
            <button mat-button matStepperNext>קדימה</button>
          </div>
        </form>
      </mat-step>
      <mat-step [stepControl]="thirdFormGroup" errorMessage="חובה למלא מידע על האוסף שלך">
        <form [formGroup]="thirdFormGroup">
          <ng-template matStepLabel>פרטי האוסף שלך</ng-template>
          <mat-form-field class="full-width">
            <input matInput type="text" formControlName="favoritePop" autocomplete="favoritePop" required>
            <mat-placeholder class="placeholder">הכנס את הפופ המועדף עלייך</mat-placeholder>
            <mat-error>חובה להכניס את הפופ המועדף עלייך</mat-error>
          </mat-form-field>
          <mat-form-field class="full-width">
            <input matInput type="text" formControlName="numberOfPops" autocomplete="numberOfPops" required>
            <mat-placeholder class="placeholder">כמות הפופים שלך</mat-placeholder>
            <mat-error>חובה להכניס את כמות הפופים שלך</mat-error>
          </mat-form-field>
          <mat-form-field class="full-width">
            <input matInput type="text" formControlName="yearOfStartCollection" autocomplete="yearOfStartCollection"
              required>
            <mat-placeholder class="placeholder">שנת תחילת האוסף</mat-placeholder>
            <mat-error>חובה להכניס את השנה בה התחלת</mat-error>
          </mat-form-field>
          <div>
            <button mat-button matStepperPrevious>אחורה</button>
            <button mat-button matStepperNext>קדימה</button>
          </div>
        </form>
      </mat-step>
      <mat-step [stepControl]="fourFormGroup" errorMessage="חובה לבחור תמונות">
          <form [formGroup]="fourFormGroup" enctype="multipart/form-data">
            <ng-template matStepLabel> תמונת פרופיל</ng-template>
            <div class="row">
              <div class="col-sm-12 col-md-12 col-lg-12">
                  <button mat-raised-button color="acceny" (click)="filePicker.click()" class="image-button">בחר תמונת פרופיל</button>
                  <img src="{{imagePreview}}" id="image-preview" *ngIf="imagePreview">
                  <input type="file" name="image" #filePicker (change)="onProfileImagePicked($event)"
                    style="visibility: hidden">
                  <mat-hint *ngIf="imagePreview">התמונה תוצג בגודל 300 * 300</mat-hint>
              </div>
            </div>
            <mat-divider *ngIf="imagePreview" id="image-divider"></mat-divider>
            <div class="row upload-image">
              <div class="col-sm-12 col-md-12 col-lg-12">
                  <button mat-raised-button color="acceny" class="image-button" (click)="filePickerMiniImage.click()">בחר תמונת מיני פרופיל</button>
                  <img src="{{miniImagePreview}}" id="mini-image-preview" *ngIf="miniImagePreview">
                  <input type="file" name="miniImage" #filePickerMiniImage (change)="onMiniProfileImagePicked($event)"
                    style="visibility: hidden">
                  <mat-hint *ngIf="miniImagePreview">התמונה תוצג בגודל הזה בדיוק</mat-hint>
              </div>
            </div>
            <mat-divider></mat-divider>
            <div>
              <button mat-button matStepperPrevious>אחורה</button>
              <button mat-button matStepperNext *ngIf="imagePreview">הבא</button>
            </div>
          </form>
        </mat-step>
      <mat-step>
        <ng-template matStepLabel>סיימת</ng-template>
        <div>
          <button mat-button matStepperPrevious>אחורה</button>
          <button mat-button (click)="register()"> סיימתי</button>
          {{alreadyExists}}
        </div>
      </mat-step>
    </mat-horizontal-stepper>
  </mat-dialog-content>
</div>
